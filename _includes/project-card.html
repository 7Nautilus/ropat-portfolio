{% assign current_lang = page.lang | default: 'en' %}
{% assign animation_index = include.index | default: 0 %}
{% if include.project.url[current_lang] %}
  {% assign project_url = include.project.url[current_lang] %}
{% else %}
  {% comment %} Fallback pour compatibilit√© avec ancienne structure {% endcomment %}
  {% assign project_url = include.project.url %}
  {% if current_lang == 'en' %}
    {% assign project_url = include.project.url | replace: '/fr/projects/', '/en/projects/' %}
  {% endif %}
{% endif %}
{% assign animations_disabled = include.disable_animation | default: false %}
{% if animations_disabled %}
  {% assign article_classes = "project-card" %}
{% else %}
  {% assign animation_delay = animation_index | times: 140 | plus: 60 %}
  {% assign article_classes = "project-card animate-fade-up" %}
{% endif %}
<article class="{{ article_classes }}" data-category="{{ include.project.category }}"{% unless animations_disabled %} style="--animate-delay: {{ animation_delay }}ms"{% endunless %}>
  <a href="{{ project_url | relative_url }}" class="project-link" aria-label="{{ include.project.aria_label[current_lang] }}">
    <!-- Project Image -->
    <div class="project-image">
      <img
        src="{{ include.project.image_src | relative_url }}" 
        alt="{{ include.project.image_alt[current_lang] }}"
        loading="lazy"
        width="400"
        height="400">
    </div>
    <!-- Project Content -->
    <div class="project-content">
      <h3 class="project-title">{{ include.project.title[current_lang] }}</h3>

      {% if include.project.client %}
        <p class="project-client"><strong>{{ include.project.client }}</strong></p>
      {% endif %}
      
      <p class="project-description">{{ include.project.description[current_lang] }}</p>
    </div>
  </a>
</article>