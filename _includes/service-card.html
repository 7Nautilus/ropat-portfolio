{% assign current_lang = page.lang | default: 'en' %}
{% assign service = include.service %}
{% assign animations_disabled = include.disable_animation | default: false %}
{% assign animation_index = include.index | default: 0 %}

{% if animations_disabled %}
  {% assign article_classes = "card service-card squircle" %}
{% else %}
  {% assign animation_delay = animation_index | times: 160 | plus: 80 %}
  {% assign article_classes = "card service-card squircle animate-fade-up" %}
{% endif %}

{% assign detail_url = service.detail_url[current_lang] %}

{% if detail_url %}
  {% assign card_tag = "a" %}
  {% if current_lang == "fr" %}
    {% assign card_aria_label = "Découvrir le service " | append: service.title[current_lang] %}
  {% else %}
    {% assign card_aria_label = "View service: " | append: service.title[current_lang] %}
  {% endif %}
{% else %}
  {% assign card_tag = "article" %}
{% endif %}

<{{ card_tag }} class="{{ article_classes }}"{% if card_tag == "a" %} href="{{ detail_url }}" aria-label="{{ card_aria_label }}"{% endif %}{% unless animations_disabled %} style="--animate-delay: {{ animation_delay }}ms"{% endunless %}>
  <!-- SVG icon -->
  <div class="service-card-placeholder">
    <div class="icon-placeholder" aria-label="{{ service.icon_aria[current_lang] }}">
      {{ service.icon }}
    </div>
    <!-- Text content-->
    <div class="service-text-content">
      <h3 class="service-title">{{ service.title[current_lang] }}</h3>
      <p>{{ service.description[current_lang] }}</p>
    </div>
  </div>
  <!-- Tools used
  <div class="service-tools">
    {% if service.tools %}
      {% for tool in service.tools %}
        <span class="service-tool">{{ tool.nom }}</span>
      {% endfor %}
    {% endif %}
  </div>
  -->

  <!-- details -->
  {% if include.details %}
    <span class="separator"></span>
    <div class="service-card-details">
      {% if service[current_lang].details %}
        {% for detail in service[current_lang].details %}
          <span>{{ detail.nom }}</span>
        {% endfor %}
      {% endif %}
    </div>
  {% endif %}

  <!-- cta -->
  {% if include.cta %}
    <div class="cta-simple orange" href="{{ detail_url }}">
      Découvrir l'offre
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
      </svg>
    </div>
  {% endif %}
</{{ card_tag }}>
